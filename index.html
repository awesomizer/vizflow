<!doctype html5>
<html>
  <head>
    <style>
      body { 
        margin: 0;
        font: 13pt courier;
        font-weight: bold;
        background-color: #FFF;
        overflow-y:hidden;
        color: #ccc;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;        
       }
    </style>
  </head>
  <body>
    <!-- <script type="text/javascript" src="jspm_packages/system.js"></script> -->
    <!-- <script type="text/javascript" src="config.js"></script> -->

    <script type="text/javascript" src="vizflow.js"></script>
    <script type="text/javascript" src="vizflow-core.js"></script>

    <!-- <script type="text/javascript" src="examples/three_circles_svg/three_circles_svg.js"></script>-->
    
    <script>

      var imageList = ['./image/vizflow_text.png'] ;
      var audioList = [] ;

      $Z.core.loader.all(imageList, audioList, show_logo) ;

      function show_logo() {

        console.log('show logo start') ;

        document.ratio = 1 ;

        var viz = $Z.core.viz.setup({
          width:  1600,
          height: 1600,
        }) ;

        document.viz = viz ;

        viz.run() ;

        var vtxt = ['v', 'i', 'z', 'f', 'l', 'o', 'w'] ;
        var size = 197 ;
        var spriteImage = $Z.core.image.to_canvas( imageList[0] ) ;

        viz.logo = {

          text: vtxt,
          sprite: $Z.core.sprite.get( spriteImage, vtxt, size, size ),
          item: new Array( vtxt.length ),

        } ;

        var xOrigin = 0.5 * size ;
        var yOrigin = 0.5 * size ;

        var xmid = viz.width * 0.5 ;
        var ymid = viz.height * 0.5 ; 

        var x0 = ( viz.width - spriteImage.height ) * 0.5 + xOrigin ;
        var y0 = ymid + yOrigin ;

        var delay = 200 ;

        for ( ktxt = 0 ; ktxt < vtxt.length ; ktxt++ ) {

          viz.logo[ktxt] = viz.setup_item({

            image: viz.logo.sprite[viz.logo.text[ktxt]][0],
            x: x0 + ktxt * size,
            y: y0,
            xOrigin: xOrigin,
            yOrigin: yOrigin,
            addSwitch: true,
            opacity: 0,

          }) ;

          viz.logo[ktxt].call('fade', ktxt * delay) ;

        }

        var duration   = 4 * 1000 ;
        var angle_func = $Z.core.transition.fixed_duration_linear('angle', duration) ;
        var spinTrans  = angle_func(Math.PI * 2 * duration / 1000) ;

        viz.logo[2].call(function() {
          this.add_transition(spinTrans)
        }, delay * vtxt.length * 2) ;

      }

    </script>

  </body>
</html>
