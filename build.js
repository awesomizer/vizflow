"format register";!function(e){function t(e){for(var t=[],r=0,n=e.length;n>r;r++)-1==d.call(t,e[r])&&t.push(e[r]);return t}function r(e,r,n,i){if("string"!=typeof e)throw"System.register provided no module name";var u;u="boolean"==typeof n?{declarative:!1,deps:r,execute:i,executingRequire:n}:{declarative:!0,deps:r,declare:n},u.name=e,l[e]||(l[e]=u),u.deps=t(u.deps),u.normalizedDeps=u.deps}function n(e,t){if(t[e.groupIndex]=t[e.groupIndex]||[],-1==d.call(t[e.groupIndex],e)){t[e.groupIndex].push(e);for(var r=0,i=e.normalizedDeps.length;i>r;r++){var u=e.normalizedDeps[r],s=l[u];if(s&&!s.evaluated){var o=e.groupIndex+(s.declarative!=e.declarative);if(void 0===s.groupIndex||s.groupIndex<o){if(void 0!==s.groupIndex&&(t[s.groupIndex].splice(d.call(t[s.groupIndex],s),1),0==t[s.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");s.groupIndex=o}n(s,t)}}}}function i(e){var t=l[e];t.groupIndex=0;var r=[];n(t,r);for(var i=!!t.declarative==r.length%2,u=r.length-1;u>=0;u--){for(var o=r[u],a=0;a<o.length;a++){var f=o[a];i?s(f):c(f)}i=!i}}function u(e){return p[e]||(p[e]={name:e,dependencies:[],exports:{},importers:[]})}function s(t){if(!t.module){var r=t.module=u(t.name),n=t.module.exports,i=t.declare.call(e,function(e,t){r.locked=!0,n[e]=t;for(var i=0,u=r.importers.length;u>i;i++){var s=r.importers[i];if(!s.locked){var o=d.call(s.dependencies,r);s.setters[o](n)}}return r.locked=!1,t});if(r.setters=i.setters,r.execute=i.execute,!r.setters||!r.execute)throw new TypeError("Invalid System.register form for "+t.name);for(var o=0,c=t.normalizedDeps.length;c>o;o++){var a,m=t.normalizedDeps[o],g=l[m],v=p[m];v?a=v.exports:g&&!g.declarative?a={"default":g.module.exports,__useDefault:!0}:g?(s(g),v=g.module,a=v.exports):a=f(m),v&&v.importers?(v.importers.push(r),r.dependencies.push(v)):r.dependencies.push(null),r.setters[o]&&r.setters[o](a)}}}function o(e){var t,r=l[e];if(r)r.declarative?a(e,[]):r.evaluated||c(r),t=r.module.exports;else if(t=f(e),!t)throw new Error("Unable to load dependency "+e+".");return(!r||r.declarative)&&t&&t.__useDefault?t["default"]:t}function c(t){if(!t.module){var r={},n=t.module={exports:r,id:t.name};if(!t.executingRequire)for(var i=0,u=t.normalizedDeps.length;u>i;i++){var s=t.normalizedDeps[i],a=l[s];a&&c(a)}t.evaluated=!0;var f=t.execute.call(e,function(e){for(var r=0,n=t.deps.length;n>r;r++)if(t.deps[r]==e)return o(t.normalizedDeps[r]);throw new TypeError("Module "+e+" not declared as a dependency.")},r,n);f&&(n.exports=f)}}function a(t,r){var n=l[t];if(!n.evaluated&&n.declarative){r.push(t);for(var i=0,u=n.normalizedDeps.length;u>i;i++){var s=n.normalizedDeps[i];-1==d.call(r,s)&&(l[s]?a(s,r):f(s))}n.evaluated||(n.evaluated=!0,n.module.execute.call(e))}}function f(e){if(m[e])return m[e];var t=l[e];if(!t)throw"Module "+e+" not present.";i(e),a(e,[]),l[e]=void 0;var r=t.declarative?t.module.exports:{"default":t.module.exports,__useDefault:!0};return m[e]=r}var l={},d=Array.prototype.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1},p={},m={};return function(t,n){var i;"undefined"!=typeof i&&i.register?(n(i),i["import"](t)):(n(i={register:r,get:f,set:function(e,t){m[e]=t},newModule:function(e){return e},global:e}),i.set("@empty",i.newModule({})),f(t))}}("undefined"!=typeof window?window:global)("src/vizflow",function(e){e.register("src/step",[],function(e){function t(){$Z.sim=$Z.pipe($Z.task)}function r(){$Z.iter++,window.requestAnimationFrame(t)}return e("default",r),{setters:[],execute:function(){"use strict"}}}),e.register("src/item",[],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0==t.length?$Z._item:($Z._item=t[0],$Z)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/prep",[],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0==t.length?$Z._prep.map(function(e){return Promise.resolve(e.prep())}):($Z._prep=t[0],$Z)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/detect",[],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0==t.length?$Z._detect.map(function(e){return Promise.resolve(e.detect())}):($Z._detect=t[0],$Z)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/perform",[],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0==t.length?$Z._perform.map(function(e){return Promise.resolve(e.perform())}):($Z._perform=t[0],$Z)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/post",[],function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];return 0==t.length?$Z._post.map(function(e){return Promise.resolve(e.post())}):($Z._post=t[0],$Z)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/pipe",[],function(e){function t(e){for(var t=Promise.resolve(),r=0;r<e.length;r++)t=t.then(e[r]);return t}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/done",[],function(e){function t(){return 0==$Z._item.length||$Z.iter>$Z.maxIter?!0:!1}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/exit",[],function(e){function t(){return $Z._item=[],$Z._prep=[],$Z._detect=[],$Z._perform=[],$Z.iter=0,!1}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/run",[],function(e){function t(){$Z.sim=$Z.pipe($Z.task)}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/update",[],function(e){function t(){var e=this,t=[],r=[];if(void 0!==e.transition){e.transition.constructor!==Array&&(e.transition=[e.transition]),$Z.currentTime=Date.now();for(var n=0;n<e.transition.length;n++){var i=e.transition[n],u=0;void 0===i.startTime?i.startTime=$Z.currentTime:u=$Z.currentTime-i.startTime;var s=i.duration-u;if(0==u)i.startValue=e[i.varName];else if(s>0){var o=1-s/i.duration;e[i.varName]=i.interpFunc(o)}else if(e[i.varName]=i.endValue,t.push(n),void 0!==i.child&&r.push(i.child),void 0!==i.end)if(i.end.constructor===Array)for(var c=0;c<i.end.length;c++)"function"==typeof i.end[c]?i.end[c]():i.end[kend].run();else"function"==typeof i.end?i.end():i.end.run()}for(var a=t.length-1;a>=0;a--){if(t[a]<e.transition.length-1){var f=e.transition[e.transition.length-1];e.transition[e.transition.length-1]=e.transition[t[a]],e.transition[t[a]]=f}e.transition.pop()}for(var l=0;l<r.length;l++)e.transition.push(r[l])}}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/transition",[],function(e){var t;return{setters:[],execute:function(){"use strict";t={linear_interp:function(e){return(1-e)*this.startValue+e*this.endValue},rounded_linear_interp:function(e){return Math.round((1-e)*this.startValue+e*this.endValue)},color_interp:function(e){var t=this.startValue,r=this.endValue;t=t.slice(1),r=r.slice(1),3===t.length&&(t=t.replace(/([0-9a-f])/gi,"$1$1")),3===r.length&&(r=r.replace(/([0-9a-f])/gi,"$1$1"));for(var n="#",i=0;3>i;i++){var u=parseInt(t.slice(2*i,2*(i+1)),16),s=parseInt(r.slice(2*i,2*(i+1)),16),o=Math.min(255,Math.round((1-e)*u+e*s));o=o.toString(16).toUpperCase(),1===o.length&&(o="0"+o),n+=o}return n},build_func:function(e,t,r){return function(n){return{varName:e,duration:t,interpFunc:r,endValue:n}}},linear_transition_func:function(e,t){return this.build_func(e,t,this.linear_interp)},rounded_linear_transition_func:function(e,t){return this.build_func(e,t,this.rounded_linear_interp)},color_transition_func:function(e,t){return this.build_func(e,t,this.color_interp)}},e("default",t)}}}),e.register("src/preprocess",[],function(e){function t(){return Promise.all($Z.prep())}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/update_items",[],function(e){function t(){return Promise.all($Z.item().map(function(e){return Promise.resolve(e.update?e.update():$Z.update.call(e))}))}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/detect_actions",[],function(e){function t(){return Promise.all($Z.detect())}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/perform_actions",[],function(e){function t(){return Promise.all($Z.perform())}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/render_image",[],function(e){function t(){return Promise.all($Z.item().map(function(e){return Promise.resolve(e.render())}))}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/step_or_exit",[],function(e){function t(){return $Z.done()?($Z.exit(),Promise.resolve(!0)):($Z.step(),Promise.resolve(!1))}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/postprocess",[],function(e){function t(){return Promise.all($Z.post())}return e("default",t),{setters:[],execute:function(){"use strict"}}}),e.register("src/vizflow",["src/step","src/item","src/prep","src/detect","src/perform","src/post","src/pipe","src/done","src/exit","src/run","src/update","src/transition","src/preprocess","src/update_items","src/detect_actions","src/perform_actions","src/render_image","src/step_or_exit","src/postprocess"],function(e){var t,r,n,i,u,s,o,c,a,f,l,d,p,m,g,v,h,x,_,$,Z,y,w,I,P,D,z,b;return{setters:[function(e){t=e["default"]},function(e){r=e["default"]},function(e){n=e["default"]},function(e){i=e["default"]},function(e){u=e["default"]},function(e){s=e["default"]},function(e){o=e["default"]},function(e){c=e["default"]},function(e){a=e["default"]},function(e){f=e["default"]},function(e){l=e["default"]},function(e){d=e["default"]},function(e){p=e["default"]},function(e){m=e["default"]},function(e){g=e["default"]},function(e){v=e["default"]},function(e){h=e["default"]},function(e){x=e["default"]},function(e){_=e["default"]}],execute:function(){"use strict";$=[],Z=[],y=[],w=[],I=[],P=0,D=!1,z=1/0,b=[p,m,h,g,v,_,x],window.$Z={verbose:D,iter:P,maxIter:z,transition:d,_item:$,_detect:y,_perform:w,_prep:Z,item:r,detect:i,perform:u,prep:n,update:l,post:s,pipe:o,step:t,done:c,exit:a,task:b,run:f},e("default",{})}}})});
//# sourceMappingURL=build.js.map