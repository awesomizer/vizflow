!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return t[a]||(t[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},b.name);c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=t[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=n(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b["default"]:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c["default"]=b,s(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&s(a,c,d)}catch(e){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(v[a])return v[a];if("@node/"==a.substr(0,6))return u(a.substr(6));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&s(b.module.exports,"__esModule",{value:!0}),v[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(r){q=!1}var s;!function(){try{Object.defineProperty({},"a",{})&&(s=Object.defineProperty)}catch(a){s=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(d){}}}}();var t={},u="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,v={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:u,register:b,registerDynamic:c,get:n,set:function(a,b){v[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)(function(a,b){b&&b.__esModule?v[a]=b:v[a]=k(b)})(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j["default"]:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function(a){this.require,this.exports,this.module;a.register("2",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{lastCollision:0,lastAction:0,collision_foreach:function(a,b){if(void 0!==a.collision&&null!==a.collision&&a.collision.count>0)for(var c=0;c<a.collision.list.length;c++)for(var d=0;2>d;d++){var e=a.item[a.collision.list[c][d]],f=a.item[a.collision.list[c][(d+1)%2]];for(var g in e.responseSet)b(e.responseSet[g],f)}},detect:function(a){void 0===a&&(a=this),$Z.iter-actionHelper.lastCollision>=a.config.frameDurationFactor&&(a.collision_detect(),actionHelper.collision_foreach(a,function(a,b){a.onSwitch&&(a.performSwitch=!0,a.sourceItem=b)}),actionHelper.lastCollision=$Z.iter)},perform:function(a){void 0===a&&(a=this),$Z.iter-actionHelper.lastAction>=a.config.frameDurationFactor&&(actionHelper.collision_foreach(a,function(a){a.performSwitch&&(a.performSwitch=!1,a.perform())}),actionHelper.lastAction=$Z.iter)}})}}}),a.register("3",[],function(a){"use strict";var b,c;return{setters:[],execute:function(){b=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext||!1,c={context:new b,buffer:void 0,source:void 0,gain:void 0,volume:1,loop:!1,setup:function(a){void 0===a&&(a=this);var b=c.context.createBufferSource();if(void 0!==a.buffer&&null!==a.buffer?b.buffer=a.buffer:console.log("audioHelper.setup: no audio loaded"),b.loop=a.loop,void 0===a.gain){var d=void 0===c.context.createGain?c.context.createGainNode():c.context.createGain();d.value=a.volume,d.connect(c.context.destination),a.gain=d}else var d=a.gain;return b.connect(d),b},fade:function(a,b,d,e){void 0===e&&(e=this),void 0===a&&(a=1),void 0===b&&(b=0),void 0===d&&(void 0===e.gain&&e.setup(),d=e.gain.gain.value>0?0:e.volume);var f=e.gain,g=c.context.currentTime;f.gain.cancelScheduledValues(g),f.gain.linearRampToValueAtTime(f.gain.value,g+b),f.gain.linearRampToValueAtTime(d,g+a+b)},play:function(a,b,d,e){void 0===e&&(e=this),void 0===d&&(d=this.buffer);var f=e.setup(),g=e.gain;void 0===a&&(a=0),void 0===b&&(b=!0);var h;h=b?c.context.currentTime:0,g.gain.cancelScheduledValues(h),g.gain.value=this.volume,f.start?f.start(h+a):f.noteOn(h+a)}},a("default",c)}}}),a.register("4",["5"],function(a){var b;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";a("default",{Nval:null,image:null,pixelwise:function(a){void 0===a&&(a=this);var c=a.item,d=a.width,e=a.height,f=c.length,g=d*e,h=2,i=g*h;if(collisionDetect.Nval!==i)collisionDetect.image=new Array(i);else for(var j=0;j<collisionDetect.image.length;j++)collisionDetect.image[j]=void 0;var k=collisionDetect.image,l={};l.index={};for(var m=0;f>m;m++)if((void 0===c[m].inert||!c[m].inert)&&void 0!==c[m].image){if(void 0===c[m].image.originalCanvas)var n=c[m].image,o=imageHelper.get_data(n);else var n=c[m].image.originalCanvas,o=imageHelper.get_data(c[m].image.originalCanvas);if(void 0!==c[m].viz)var p=c[m].viz.viewportX,q=c[m].viz.viewportY;else var p=0,q=0;for(var r=Math.round(c[m].x-p),s=Math.round(c[m].y-q),t=Math.max(0,Math.min(e,s)),u=Math.max(0,Math.min(e,s+o.height)),v=Math.max(0,Math.min(d,r)),w=Math.max(0,Math.min(d,r+o.width)),x=4e3,y=Math.ceil(g/x),z=t;u>z;z++)for(var A=v;w>A;A++){var j=z*d+A;if(j%y===0){var B=j*h,C=z-t,D=A-v;0>s&&(C+=-s),0>r&&(D+=-r);var E=Math.floor(C*n.width+D),F=o.data[4*E+3];if(F>0)for(var G=0;h-1>G;G++)void 0!==k[B+G]?(k[B+G+1]=m,l.index[k[B+G]*f+m]=!0):0==G&&(k[B]=m)}}}var H=b(l.index);l.count=0,l.list=new Array(H.length);for(var I=0;I<H.length;I++){var z=Math.floor(H[I]/f),A=H[I]%f;l.list[I]=[z,A],l.count++}a.collision=l}})}}}),a.register("6",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{item:function(a,b,c){if(void 0===a&&(a=this),drawHelper.image(a),void 0!==a.child)for(var d=0;d<a.child.length;d++){a.child[d].x=a.x,a.child[d].y=a.y,a.child[d].angle=a.angle,a.child[d].xScale=a.xScale,a.child[d].yScale=a.yScale;var e=a.child[d].opacity;a.childFade===!0&&(a.child[d].opacity=a.child[d].opacity*a.opacity),a.child[d].render(),a.child[d].opacity=e}},indexed:function(a,b,c,d){if(void 0===b)var b=imageHelper.create(c,d);else b.width=b.width;for(var e=b.context(),f=0;f<a.length;f++)if(a[f].uiSwitch!==!1){var g;g=void 0!==a[f].image.originalCanvas?a[f].image.originalCanvas:a[f].image;var h=g.context().getImageData(0,0,a[f].image.width,a[f].image.height),i=imageHelper.to_index(h,f),j=imageHelper.create(a[f].image.width,a[f].image.height);if(j.context().clearRect(0,0,j.width,j.height),j.context().putImageData(i,0,0),void 0!==a[f].xOrigin)var k=a[f].xOrigin*a[f].xScale;else var k=0;if(void 0!==a[f].yOrigin)var l=a[f].yOrigin*a[f].yScale;else var l=0;e.drawImage(j,a[f].x-k,a[f].y-l)}return b},image:function(a,b,c){if(void 0===a&&(a=this),0!==a.opacity){void 0===b&&(b=a.viz.fullContext),void 0===c&&(c=document.ratio),void 0===a.xScale&&(a.xScale=1),void 0===a.yScale&&(a.yScale=1);var d,e;a.fixed===!0?(d=a.viz.viewportX,e=a.viz.viewportY):(d=0,e=0);var f=a.xOrigin*a.xScale||0,g=a.yOrigin*a.yScale||0,h=(a.x+a.viz.xShift+d-f)*c,i=(a.y+a.viz.yShift+e-g)*c;if(h=Math.floor(h),i=Math.floor(i),void 0!==a.opacity){var j=b.globalAlpha;b.globalAlpha=a.opacity;var k=Math.floor(c*(a.x+a.xAngle)),l=Math.floor(c*(a.y+a.yAngle));b.translate(k,l),b.rotate(a.angle),b.translate(-k,-l);var m=Math.floor(a.image.width*a.xScale),n=Math.floor(a.image.height*a.yScale);b.drawImage(a.image,0,0,a.image.width,a.image.height,h,i,m,n),b.setTransform(1,0,0,1,0,0),b.globalAlpha=j}else b.drawImage(a.image,h,i)}},rect:function(a,b,c){void 0===a&&(a=this),void 0===b&&(b=a.viz.fullContext),void 0===c&&(c=document.ratio);var d=b.fillStyle;void 0===a.color&&(a.color=d);var e=b.strokeStyle;void 0===a.stroke&&(a.stroke=e);var f,g;if(void 0!==a.viz){var h,i;a.fixed===!0?(h=a.viz.viewportX,i=a.viz.viewportY):(h=0,i=0),f=a.x+a.viz.xShift+h,g=a.y+a.viz.yShift+i}else f=a.x,g=a.y;var g,j=f*c,k=g*c;j=Math.floor(j),k=Math.floor(k),b.beginPath(),b.fillStyle=a.color,b.strokeStyle=a.stroke,void 0!==a.opacity&&(b.globalAlpha=a.opacity);var l=Math.floor(c*(a.x+a.xAngle)),m=Math.floor(c*(a.y+a.yAngle));b.translate(l,m),b.rotate(a.angle),b.translate(-l,-m),b.rect(j,k,Math.floor(a.width*c),Math.floor(a.height*c)),b.fill(),b.stroke(),b.closePath(),b.setTransform(1,0,0,1,0,0),b.fillStyle=d,b.strokeStyle=e},circle:function(a,b){void 0===a&&(a=this),void 0===b&&(b=a.viz.fullContext),b.beginPath();var c=a.x,d=a.y;c=(c+viz.width)*ratio,d=(d+viz.height)*ratio,c=Math.floor(c),d=Math.floor(d);var e=a.radius;b.arc(c,d,e,0,2*Math.PI,!0);var f=b.fillStyle;void 0===a.color&&(a.color=f),b.fillStyle=a.color,b.fill(),b.closePath(),b.fillStyle=f}})}}}),a.register("7",["8"],function(a){var b,c;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";c={zoom_inout:function(a,b){void 0===b&&(b=this),void 0===a&&(a={});var c=-2*Math.floor(.04*b.screenCanvas.width);if(void 0===a.width)var d=b.screenCanvas.width+c;else d=a.width*document.ratio;if(void 0===a.height)var e=b.screenCanvas.height+c;else e=a.height*document.ratio;if(void 0===a.x)var f=Math.floor(b.viewportX-.25*c);else var f=a.x*document.ratio;if(void 0===a.y)var g=Math.floor(b.viewportY-.25*c);else var g=a.y*document.ratio;if(void 0===a.duration)var h=b.fadeDuration;else var h=a.duration;var h=.25*h;if(void 0===a.shakeSwitch)var i=!1;else var i=a.shakeSwitch;f=Math.max(0,Math.min(b.width*document.ratio,f)),g=Math.max(0,Math.min(b.height*document.ratio,g));var j=$Z.transition.rounded_linear_transition_func("viewportWidth",h)(d),k=$Z.transition.rounded_linear_transition_func("viewportHeight",h)(e),l=$Z.transition.rounded_linear_transition_func("viewportX",h)(f),m=$Z.transition.rounded_linear_transition_func("viewportY",h)(g),n=$Z.transition.rounded_linear_transition_func("viewportWidth",h)(b.screenCanvas.width),o=$Z.transition.rounded_linear_transition_func("viewportHeight",h)(b.screenCanvas.height),p=$Z.transition.rounded_linear_transition_func("viewportX",h)(0),q=$Z.transition.rounded_linear_transition_func("viewportY",h)(0);j.child=n,k.child=o,l.child=p,m.child=q,j.pause=.45*h,k.pause=.45*h,l.pause=.45*h,m.pause=.45*h,i&&(j.end=function(){b.shake()}),b.add_transition(j),b.add_transition(k),b.add_transition(l),b.add_transition(m)},zoom:function(a,b){void 0===b&&(b=this),b.add_transition(effectHelper.zoom_transition(a))},zoom_transition:function(a){void 0===a.duration&&(a.duration=1e3);var b=a.duration,c=$Z.transition.rounded_linear_transition_func("viewportWidth",b)(a.width),d=$Z.transition.rounded_linear_transition_func("viewportHeight",b)(a.height),e=$Z.transition.rounded_linear_transition_func("viewportX",b)(a.x),f=$Z.transition.rounded_linear_transition_func("viewportY",b)(a.y);return[c,d,e,f]},method:{flash:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a=5),void 0===b&&(b=100);for(var d=function(){},e=[d,drawHelper.item],f=new Array(2*a),g=0;2*a>g;g++)f[g]=transitionHelper.new_step("render",e[g%e.length],b);return f=transitionHelper.sequence(f),c.add_transition(f),f},shake:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a="x"),void 0===b&&(b="y");var d=[1,-1,-1,1],e=[1,-1,1,-1],f=1.5*document.ratio,g=1,h=9;for(xTransition=new Array(h),yTransition=new Array(h),kstep=0;kstep<h-1;kstep++)xTransition[kstep]=c.transitionSet[a](Math.round(Math.random()*d[(kstep+$Z.iter)%d.length]*f)),yTransition[kstep]=c.transitionSet[b](Math.round(Math.random()*e[(kstep+3*$Z.iter)%d.length]*f)),f*=g;xTransition[kstep]=c.transitionSet[a](0),yTransition[kstep]=c.transitionSet[b](0),xTransition=transitionHelper.sequence(xTransition)[0],yTransition=transitionHelper.sequence(yTransition)[0];c.add_transition([xTransition,yTransition])}}},c.image={foreach:function(a,b,c){void 0===c&&(c=-1);for(var d=a.context(),e=d.getImageData(0,0,a.width,a.height),f=e.data,g=f.length/4,h=0,i=(new Array(g),0);g>i;i++)3>c&&0===f[h+3]?h+=4:(c>=0&&4>c?f[h+c]=b(f[h+c]):-1===c&&(f[h+0]=b(f[h+0]),f[h+1]=b(f[h+1]),f[h+2]=b(f[h+2])),h+=4);d.putImageData(e,0,0)},opacity:function(a,b){imageEffectHelper.foreach(a,function(){return b},3)},binary_opacity_filter:function(a,b){for(var c=a.context(),d=c.getImageData(0,0,a.width,a.height),e=d.data,f=e.length/4,g=0,h=new Array(f),i=0;f>i;i++)e[g+3]>0&&(h[f]=e[g+3]),g+=4;void 0===b&&(b=68),g=0;for(var i=0;f>i;i++)e[g+3]<b?e[g+3]=0:e[g+3]=255,g+=4;c.putImageData(d,0,0)},color_filter:function(a,b,c){function d(a,b,c){var d=(1-c)*a+c*b;return Math.round(d)}void 0===c&&(c=1),c>1&&(c=1),0>c&&(c=0);var e=imageHelper.copy(a);for(kclr=0;kclr<b.length;kclr++)void 0!==b[kclr]&&imageEffectHelper.foreach(e,function(a){return d(a,b[kclr],c)},kclr);return e},fade_transition:function(a){var b=1e3;void 0===a.duration&&(a.duration=b);var c=$Z.transition.linear_transition_func("opacity",a.duration)(a.opacity);return void 0!==a.end&&(c.end=a.end),void 0!==a.child&&(c.child=a.child),void 0!==a.pause&&(c.pause=a.pause),c},fade_sequence:function(a){void 0===a&&(a={});var b=(a.valueList,a.duration||1e3),c=a.value,d=transitionHelper.fixed_duration_linear("opacity",b);return transitionHelper.new_sequence(c,d)},explode:function(a,c,d,e,f){void 0===f&&(f=this),void 0===a&&(a=24),void 0===c&&(c=1500),void 0===d&&(d=!0),void 0===e&&(e=!0),d&&itemHelper.remove(f);for(var g,h,i=Math.floor(f.image.height/a),j=Math.floor(f.image.width/a),k=i*j,l=new Array(k),m=a,n=a,o=0,p=0,q=a,r=a,s=300,t=0;i>t;t++)for(var u=0;j>u;u++){var v=imageHelper.create(a,a),w=v.context();g=Math.floor(u*a/document.ratio),h=Math.floor(t*a/document.ratio),w.drawImage(f.image,g,h,m,n,o,p,q,r);var x=t*j+u,y=$Z.transition.rounded_linear_transition_func("x",c)(2*(Math.random()-.5)*s+f.x+g);l[x]=b(itemHelper.setup(),{viz:f.viz,x:f.x+g,y:f.y+h,image:v,opacity:1,render:drawHelper.image,inert:!0,transition:[y,$Z.transition.rounded_linear_transition_func("y",c)(2*(Math.random()-.5)*s+f.y+h)]}),y.end=transitionHelper.remove_end(l[x]),e&&imageEffectHelper.fade.call(l[x],{duration:c})}itemHelper.add(viz,l)}},a("default",c)}}}),a.register("9",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{get_data:function(a){return a.context().getImageData(0,0,a.width,a.height)},view:function(a){var b=a.toDataURL("image/png");console.log("dataUrl",b);var c=window.open();c.document.write('<img src="'+b+'"/>')},text2image:function(a){void 0===a&&(a=this);var b=String(a.text),c=a.sprite,d=c[b[0]][0].width,e=c[b[0]][0].height;if(void 0===a.xShift)var f=0;else var f=a.xShift;for(var g=imageHelper.create(d*b.length+(b.length-1)*f,e),h=0;h<b.length;h++)g.context().drawImage(c[b[h]][0],Math.floor(f*h+d*h),0);return g},text_sprite:function(a){void 0===a&&(a={});var b=(a.font||"11px Lucida Console","0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")),c={};for(kchar=0;kchar<b.length;kchar++){var d=imageHelper.word({font:a.font||"Lucida",px:a.px||72,color:a.color||"#FFFF30",text:b[kchar]});c[b[kchar]]=[d]}return c},word_block:function(a){var b=imageHelper.word(a),c=10,d=2,e=imageHelper.create(b.width+2*c,b.height+2*d),f=e.context(),g={x:0,y:0,width:e.width,height:e.height,color:"#FFF",stroke:"rgba(0, 0, 0, 0)",opacity:1};return drawHelper.rect(g,f),f.drawImage(b,c,d),f.lineWidth=1,f.strokeStyle="rgba(0, 0, 0, 1)",f.rect(0,0,e.width,e.height),f.stroke(),e=imageHelper.adjust_ratio(e)},word:function(a){var b;void 0===a.binarySwitch&&(a.binarySwitch=!0),b=void 0===a.px?12:a.px;var c;c=void 0===a.font?"Courier":a.font;var d=imageHelper.create(),e=d.context();e.font=b+"px "+c;var f=e.measureText(a.text),g=Math.ceil(f.width),h=b;if(d.width=g,d.height=h,e.font=b+"px "+c,e.textBaseline="bottom",void 0===a.color&&(a.color="rgba(0, 0, 0, 1)"),e.fillStyle=a.color,e.fillText(a.text,0,b),a.binarySwitch===!0){var i=50;imageEffectHelper.binary_opacity_filter(d,i)}return d},clear_color:function(a,b){for(var c=a.data.length/4,d=20,e=0;c>e;e++){var f=4*e,g=a.data[f+0],h=a.data[f+1],i=a.data[f+2],j=imageHelper.color_distance(g,h,i,b);d>j&&(a.data[f+0]=0,a.data[f+1]=0,a.data[f+2]=0,a.data[f+3]=0)}},color_distance:function(a,b,c,d){return Math.abs(a-d[0])+Math.abs(b-d[1])+Math.abs(c-d[2])},clear_rect:function(a,b){var c=imageHelper.create(a.width,a.height),d=c.context();return d.drawImage(a,0,0),d.clearRect(b.x,b.y,b.width,b.height),c},keep_rect:function(a,b){var c=imageHelper.create(a.width,a.height),d=c.context();return d.drawImage(a,b.x,b.y,b.width,b.height,b.x,b.y,b.width,b.height),c},to_canvas:function(a){var b=imageLoader.cache[a],c=imageHelper.create(),d=c.context();return c.width=b.width,c.height=b.height,d.drawImage(b,0,0),c},create:function(a,b,c){var d=document.createElement("canvas");if(d.setAttribute("width",a),d.setAttribute("height",b),d.mozImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1,d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1,d.context=imageHelper.context2d,void 0!==c)for(var e=0;e<c.length;e++){var f=function(){return c[e]};imageEffectHelper.foreach(d,f,e)}return d},context2d:function(a){void 0===a&&(a=this);var b=a.getContext("2d");return b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1,b.msImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1,b},adjust_ratio:function(a){var b=hidpi_adjust(imageHelper.get_data(a)).canvas;return void 0!==a.sourceCollisionImage&&(b.sourceCollisionImage=a.sourceCollisionImage),void 0!==a.targetCollisionImage?b.targetCollisionImage=a.targetCollisionImage:b.targetCollisionImage=a,b.originalCanvas=a,b},copy:function(a){var b=imageHelper.create(a.width,a.height),c=b.context();return c.drawImage(a,0,0),b.originalCanvas=a.originalCanvas,b},block_copy:function(a,b){for(var c=imageHelper.create(a.width*b,a.height*b),d=c.context(),e=d.getImageData(0,0,c.width,c.height),f=a.data,g=e.data,h=a.width*a.height,i=0;h>i;i++)for(var j=i%a.width,k=Math.floor(i/a.width),l=b*j,m=b*k,n=4*i,o=f[n+0],p=f[n+1],q=f[n+2],r=f[n+3],s=0;b>s;s++)for(var t=0;b>t;t++){var u=l+s,v=m+t,w=v*e.width+u,x=4*w;g[x+0]=o,g[x+1]=p,g[x+2]=q,g[x+3]=r}d.putImageData(e,0,0);var y={data:e,context:d,canvas:c};return y},flip_image:function(a){for(var b=a.context(),c=b.getImageData(0,0,a.width,a.height),d=new_image_data(a.width,a.height),e=c.data.length/4,f=0;e>f;f++){var g=imageHelper.flip_index(f,a.width,a.height),h=4*f,i=4*g;d.data[i+0]=c.data[h+0],d.data[i+1]=c.data[h+1],d.data[i+2]=c.data[h+2],d.data[i+3]=c.data[h+3]}var j=imageHelper.create(a.width,a.height);return j.context().putImageData(d,0,0),j},flip_index:function(a,b,c){var d=Math.floor(a/b),e=a%b,f=b-e-1,g=d*b+f;return g},get_original:function(a){return a.originalCanvas},to_index:function(a,b){for(var c=new_image_data(a.width,a.height),d=c.data.length/4,e=0;d>e;e++){var f=4*e,g=a.data[f+3];g>0&&(c.data[f+0]=b+1,c.data[f+1]=0,c.data[f+2]=0,c.data[f+3]=255)}return c}})}}}),a.register("a",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{down:function(a,b){function c(){if("touchstart"===a.type)for(var c=0;c<e.length;c++)b.viz.input.response[d].call(b.viz,e[c]);else b.viz.input.response[d].call(b.viz,e)}void 0===b&&(b=this);var d,e;switch(a.type){case"keydown":d="keyboard",e=a;break;case"mousedown":d="screen",e=a;break;case"touchstart":d="screen",e=a.touches}var f={prep:c,viz:b.viz};$Z._prep.push(f)},up:function(a,b){void 0===b&&(b=this),$Z.prep([b.viz])},response:{keyboard:function(a,b){void 0===b&&(b=this),void 0!==b.keyboard_callback&&b.keyboard_callback(a)},screen:function(a,b){void 0===b&&(b=this),void 0===b.screen_callback?inputEvent.response.screen_callback.call(b,a):b.screen_callback(a)},screen_callback:function(a,b){if(void 0===b&&(b=this),void 0!==b.ui){var c=set_canvas_position(b.canvas),d=Math.round((a.clientX-c.left)/c.scale),e=Math.round((a.clientY-c.top)/c.scale);drawHelper.indexed(b.ui.item,b.ui.canvas);var f=b.ui.canvas.context().getImageData(d,e,1,1).data,g=f[0]-1;g>=0&&b.ui.item[g].callback()}}}})}}}),a.register("b",["8"],function(a){var b;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";a("default",{setup:function(a,c){void 0===c&&(c=this),void 0===a&&(a={}),void 0===a.opacity&&(a.opacity=1),void 0===a.inert&&(a.inert=!0);var d={delayCount:0,responseSet:{},config:a,viz:a.viz||c,x:a.x||0,y:a.y||0,angle:a.angle||0,xOrigin:a.xOrigin||0,yOrigin:a.yOrigin||0,xAngle:a.xAngle||0,yAngle:a.yAngle||0,xScale:a.xScale||1,yScale:a.yScale||1,type:a.type,element:a.element,enter:a.enter,exit:a.exit,opacity:a.opacity,color:a.color,width:a.width,height:a.height,image:a.image,child:a.child,childFade:a.childFade,inert:a.inert,fixed:a.fixed,uiSwitch:a.uiSwitch||!1,callback:a.callback,addSwitch:a.addSwitch||!1,render:a.render||drawHelper.item};return b(d,itemHelper.method),b(d,transitionHelper.method),d.addSwitch===!0&&d.add(),d},method:{collision_image:function(a,b){void 0===b&&(b=this);var c=a+"CollisionImage";if(void 0!==b.image[c]&&null!==b.image[c]){var d=b.image[c];return d}},default_child:function(a){void 0===a&&(a=this),void 0===a.child&&(a.child=[]);var b=imageEffectHelper.color_filter(a.image,[255,255,255]);a.white=Object.copy(a),a.white.childFade=!0,a.white.child=void 0,a.white.image=b,a.white.opacity=0,a.child.push(a.white)},zoom:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a=.5),void 0===b&&(b=c.viz.fadeDuration),c.viz.zoom({duration:b,x:c.x,y:c.y,width:c.viz.width*a,height:c.viz.height*a})},add:function(a,b){if(void 0===b&&(b=this),void 0===a&&(a=this.viz),void 0===a.item&&(a.item=[]),b.constructor!==Array)a.stagingArray.push(b);else for(var c=0;c<b.length;c++)a.stagingArray.push(b[c])},remove:function(a){void 0===a&&(a=this),a.removeSwitch=!0},scale:function(a,b,c){void 0===c&&(c=this),void 0===b&&(b=a),c.xScale=a,c.yScale=b},loop:function(a,b){void 0===b&&(b=this),a=a.constructor===String?b[a]:a,b.add_transition(b.loop_trans(a))},call:function(a,b,c){if(void 0===c&&(c=this),a.constructor===Array)for(var d=0,e=0;e<a.length;e++){if(b.constructor===Number)var f=b*(e+1);else b.constructor===Array?(d+=b[e],f=d):console.log("item_helper_call: delay is not a Number of Array");if(a[e].constructor===String)var g=c[a[e]];else var g=a[e];c.run_callback(g,f)}else a.constructor===String&&(a=c[a]),c.run_callback(a,b)},run_callback:function(a,b,c){void 0===c&&(c=this),c.delayCount++;var d="delay"+c.delayCount;c[d]=null;var e=transitionHelper.new_step(d,void 0,b);e.end=function(){a.call(c)},c.add_transition(e)},flash:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a=1),void 0===b&&(b=100);for(var d=function(){},e=[d,drawHelper.item],f=new Array(2*a),g=0;2*a>g;g++)f[g]=transitionHelper.new_step("render",e[g%e.length],b);return f=transitionHelper.sequence(f),void 0!==c.add_transition&&c.add_transition(f),f},shake:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a="x"),void 0===b&&(b="y");var d=[1,-1,-1,1],e=[1,-1,1,-1],f=1.5*document.ratio,g=1,h=9;for(xTransition=new Array(h),yTransition=new Array(h),kstep=0;kstep<h-1;kstep++)xTransition[kstep]=c.transitionSet[a](Math.round(Math.random()*d[(kstep+$Z.iter)%d.length]*f)),yTransition[kstep]=c.transitionSet[b](Math.round(Math.random()*e[(kstep+3*$Z.iter)%d.length]*f)),f*=g;xTransition[kstep]=c.transitionSet[a](0),yTransition[kstep]=c.transitionSet[b](0),xTransition=transitionHelper.sequence(xTransition)[0],yTransition=transitionHelper.sequence(yTransition)[0];c.add_transition([xTransition,yTransition])},fade:function(a,b){if(void 0===b&&(b=this),void 0===a&&(a={}),void 0===a.opacity){var c=.5;b.opacity<c?a.opacity=1:a.opacity=0}var d=imageEffectHelper.fade_transition(a),e=a.replacementSwitch||!0;b.add_transition(d,e)},whiteflash:function(a,b){void 0===b&&(b=this),void 0===a&&(a=b.duration||b.viz.fadeDuration),void 0===b.white&&b.default_child();var c=transitionHelper.fixed_duration_creator("opacity",a,transitionHelper.linear_interp);b.white.add_sequence([1,0],c)},loop_fade:function(a,b,c){void 0===c&&(c=this),void 0===a&&(a=c.viz.fader),void 0===b&&(b=[1,0]),c.loop(function(){return a(b)})}}})}}}),a.register("c",[],function(a){"use strict";var b,c,d;return{setters:[],execute:function(){b={loading:!1,cache:{},loadingStats:{total:null,count:null,finalCallback:null},load:function(a){if(void 0!==b.cache[a])b.callback_handler();else{if(!AudioContext)return void alert("Web Audio API is not supported by your browser.");var c=Object.copy(audioHelper),d=new XMLHttpRequest;d.open("get",a,!0),d.responseType="arraybuffer",d.onload=function(){audioHelper.context.decodeAudioData(d.response,function(d){c.buffer=d,b.cache[a]=c,b.callback_handler()})},d.send()}return c},callback_handler:function(){b.loadingStats.count++,b.loadingStats.count===b.loadingStats.total&&(b.loadingStats.finalCallback(),b.loading=!1)},preload:function(a,c){return b.loading?!1:0===a.length?void c():(b.loading=!0,b.loadingStats.total=a.length,b.loadingStats.count=0,b.loadingStats.finalCallback=c,void a.forEach(function(a){b.load(a)}))}},c={loading:!1,cache:{},loadingStats:{total:null,count:null,finalCallback:null},load:function(a){if(void 0!==c.cache[a])c.callback_handler();else{var b=new Image;b.onload=c.callback_handler,b.src=a,c.cache[a]=b}return b},callback_handler:function(){c.loadingStats.count++,c.loadingStats.count===c.loadingStats.total&&(c.loadingStats.finalCallback(),c.loading=!1)},preload:function(a,b){if(!c.loading){if(0===a.length)return void b();c.loading=!0,c.loadingStats.total=a.length,c.loadingStats.count=0,c.loadingStats.finalCallback=b,a.forEach(function(a){c.load(a)})}}},d={image:c,audio:b},a("default",d)}}}),a.registerDynamic("d",["e","f","10"],!0,function(a,b,c){var d=a("e"),e=a("f"),f=a("10");return c.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)},c.exports}),a.registerDynamic("11",["12","d"],!0,function(a,b,c){var d=a("12");return a("d")("keys",function(a){return function(b){return a(d(b))}}),c.exports}),a.registerDynamic("13",["11","f"],!0,function(a,b,c){return a("11"),c.exports=a("f").Object.keys,c.exports}),a.registerDynamic("5",["13"],!0,function(a,b,c){return c.exports={"default":a("13"),__esModule:!0},c.exports}),a.register("14",["5"],function(a){var b;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";a("default",{foreach:function(a,c){for(var d=b(a),e={},f=0;f<d.length;f++)a[d[f]].constructor===Array?e[d[f]]=a[d[f]].map(c):e[d[f]]=a[d[f]];return e},make_sheet:function(a){function b(a){return a.width}function c(a){return a.height}widthSet=spriteHelper.foreach(a,b),heightSet=spriteHelper.foreach(a,c);var d=0,e=0,f=[];for(var g in a)if(a[g].constructor===Array){d++;var h=widthSet[g].reduce(function(a,b){return a+b}),i=heightSet[g][0];f.push(i),h>e&&(e=h)}var j=f.reduce(function(a,b){return a+b}),k=imageHelper.create(e,j),l=k.context(),m=0;for(var g in a){var n=a[g];if(n.constructor===Array)for(var o=0,p=0;p<n.length;p++)l.drawImage(n[p],o,m),o+=n[p].width;m+=f.shift()}imageHelper.view(k)},is_blank:function(a){var b=!0;for(k=0;k<a.data.length;k++)if(0!==a.data[k]){b=!1;break}return b},get:function(a,b,c,d,e){if(void 0===e&&(e=!0),d.constructor===Number){var f=d;d=new Array(b.length);for(var g=0;g<d.length;g++)d[g]=f}if(c.constructor===Number){var h=c;c=new Array(b.length);for(var i=0;i<c.length;i++)c[i]=h}for(var j=Math.max.apply(null,d),k=b.length,l={},m=0,g=0;k>g;g++){for(var n=[],o=Math.floor(a.width/c[g]),p=0;o>p;p++){if(e)var q=imageHelper.create(c[g],j);else var q=imageHelper.create(c[g],d[g]);var r=q.context(),s=p*q.width;e?r.drawImage(a,s,m,q.width,d[g],0,j-d[g],q.width,d[g]):r.drawImage(a,s,m,q.width,d[g],0,0,q.width,d[g]);var t=imageHelper.get_data(q),u=spriteHelper.is_blank(t);if(u)break;q=imageHelper.adjust_ratio(q),n.push(q)}l[b[g]]=n,m+=d[g]}return l},get_text:function(a,b,c){var d=imageHelper.to_canvas(a),e="0123456789abcdefghijklmnopqrstuvwxyz".split("");return spriteHelper.get(d,e,b,c)},horizontal_flip:function(a){for(var c=b(a),d={},e=0;e<c.length;e++)a[c[e]].constructor===Array?d[c[e]]=spriteHelper.flip_sprite(a[c[e]]):d[c[e]]=a[c[e]];return d},flip_sprite:function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=imageHelper.flip_image(a[c]),void 0!==a[c].originalCanvas&&(b[c].originalCanvas=imageHelper.flip_image(a[c].originalCanvas)),void 0!==a[c].sourceCollisionImage&&(b[c].sourceCollisionImage=imageHelper.flip_image(a[c].sourceCollisionImage)),void 0!==a[c].targetCollisionImage?b[c].targetCollisionImage=imageHelper.flip_image(a[c].targetCollisionImage):b[c].targetCollisionImage=b[c];return b}})}}}),a.register("15",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{step_interp:function(a){return this.endValue},linear_interp:function(a){return $Z.transition.linear_interp.call(this,a)},rounded_linear_interp:function(a){return $Z.transition.rounded_linear_interp.call(this,a)},step_func:function(a,b){return $Z.transition.build_func(a,b,transitionHelper.step_interp)},linear_func:function(a,b){return $Z.transition.build_func(a,b,$Z.transition.linear_interp)},rounded_linear_func:function(a,b){return $Z.transition.build_func(a,b,transitionHelper.rounded_linear_interp)},fixed_duration_creator:function(a,b,c){return $Z.transition.build_func(a,b,c)},fixed_duration_step:function(a,b){return transitionHelper.fixed_duration_creator(a,b,transitionHelper.step_interp)},fixed_duration_linear:function(a,b){return transitionHelper.fixed_duration_creator(a,b,transitionHelper.linear_interp)},fixed_duration_rounded_linear:function(a,b){return transitionHelper.fixed_duration_creator(a,b,transitionHelper.rounded_linear_interp)},"new":function(a,b,c,d){return transitionHelper.fixed_duration_creator(a,c,d)(b)},new_step:function(a,b,c){return transitionHelper["new"](a,b,c,transitionHelper.step_interp)},new_linear:function(a,b,c){return transitionHelper["new"](a,b,c,$Z.transition.linear_interp)},new_rounded_linear:function(a,b,c){return transitionHelper["new"](a,b,c,$Z.transition.rounded_linear_interp)},sequence:function(a){for(var b=a[0],c=0;c<a.length-1;c++)a[c].child=a[c+1];
return[b]},new_sequence:function(a,b){for(var c=new Array(a.length),d=0;d<c.length;d++)c[d]=b(a[d]);return transitionHelper.sequence(c)},get_child:function(a,b){if("last"===b)for(;void 0!==a.child;)a=a.child;else for(var c=0;b>c;c++)a=a.child;return a},update_end_value:function(a,b,c){void 0===d&&(this.transition=[]);var d=this.transition,e=transitionHelper.find(a,d);e>-1?d[e].endValue=b:d.push(c(b))},check_end_value:function(a,b){var c={check:void 0,index:-1},d=this.transition;void 0===d&&(this.transition=[],d=this.transition);var e=transitionHelper.find(a,d);return-1===e?c:(c.index=e,d[e].endValue===b?c.check=!0:c.check=!1,c)},duration:function(a){void 0===a&&(a=this);for(var b=a.duration,c=a;void 0!==c.child;)c=c.child,b+=c.duration;return b},find:function(a,b){if(void 0===this.transition&&(this.transition=[]),void 0===b&&(b=this.transition),0===b.length)return-1;for(var c=-1,d=0;d<b.length;d++)b[d].varName===a&&(c=d);return c},copy:function(a){if(a.constructor===Array){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=transitionHelper.copy(a[c]);return b}var b=Object.copy(a);return void 0!==b.child&&(b.child=transitionHelper.copy(a.child)),void 0!==b.end&&b.end.constructor===Object&&(b.end=Object.copy(a.end)),b},loop_end:function(a){void 0===a&&(a=this);var b=a.item,c=a.transition_func;b.loop(c)},method:{add_transition:function(a,b,c){void 0===c&&(c=this),void 0===b&&(b=!0);var d=c.transition;for(void 0===d&&(c.transition=[],d=c.transition),d.constructor!==Array&&(d=[d]),a.constructor!==Array&&(a=[a]),kNew=0;kNew<a.length;kNew++){a[kNew].item=c;var e=a[kNew].varName,f=transitionHelper.find(e,d);-1===f?d.push(a[kNew]):b?d[f]=a[kNew]:d.push(a[kNew])}},add_step:function(a,b,c,d,e){void 0===e&&(e=this),void 0===d&&(d=!0);var f=transitionHelper.new_step(a,b,c);return e.add_transition(f,d),e},add_linear:function(a,b,c,d,e){void 0===e&&(e=this),void 0===d&&(d=!0);var f=transitionHelper.new_linear(a,b,c);return e.add_transition(f,d),e},add_rounded_linear:function(a,b,c,d,e){void 0===e&&(e=this),void 0===d&&(d=!0);var f=transitionHelper.new_rounded_linear(a,b,c);return e.add_transition(f,d),e},add_sequence:function(a,b,c){void 0===c&&(c=this);for(var d=new Array(a.length),e=0;e<d.length;e++)d[e]=b(a[e]);c.add_transition(transitionHelper.sequence(d))},add_child:function(a,b,c,d,e){void 0===e&&(e=this),void 0===c&&(c=0);var f=a;if(void 0===f)return void(void 0!==e&&transitionHelper.add.call(e,b));if(void 0===d)for(d=0;void 0!==f.child;)d++,f=f.child;else for(var f=a,g=0;d>g;g++)f=f.child;f.pause=c,f.child=b},add_end:function(a,b,c,d){void 0===d&&(d=this);var e=d.transition;void 0===e&&(this.transition=[],e=d.transition);var f=transitionHelper.find(a,e),g=d.transition[f];b>0&&(g=transitionHelper.get_child(g,b)),g.end=c},loop_trans:function(a,b){void 0===b&&(b=this);var c=a(),d=transitionHelper.get_child(c,"last");return void 0===d.end?d.end={item:b,transition_func:a,run:transitionHelper.loop_end}:d.end.constructor===Object?d.run():d(),c},remove_transition:function(a,b){void 0===b&&(b=this);var c=b.transition;void 0===c&&(b.transition=[],c=b.transition);var d=transitionHelper.find(a,c);-1!==d&&c.splice(d,1)},remove_end:function(a){void 0===a&&(a=this);var b={item:a,run:function(){void 0===this.item.remove&&(this.item.remove=itemHelper.remove),this.item.remove()}};return b}}})}}}),a.register("16",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{setup:function(a,b){void 0===b&&(b=this),void 0===a&&(a={});var c={canvas:a.canvas||imageHelper.create(b.width,b.height),context:a.context||imageHelper.create(b.width,b.height).context(),item:a.item||[]};return b.ui=c,b}})}}}),a.registerDynamic("17",[],!0,function(a,b,c){var d=this,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();return"number"==typeof __g&&(__g=d),c.exports}),a.registerDynamic("18",[],!0,function(a,b,c){return c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a},c.exports}),a.registerDynamic("19",["18"],!0,function(a,b,c){var d=a("18");return c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}},c.exports}),a.registerDynamic("e",["17","f","19"],!0,function(a,b,c){var d=this,d=a("17"),e=a("f"),f=a("19"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};return h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,c.exports=h,c.exports}),a.registerDynamic("1a",[],!0,function(a,b,c){var d=Object;return c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach},c.exports}),a.registerDynamic("1b",[],!0,function(a,b,c){return c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a},c.exports}),a.registerDynamic("12",["1b"],!0,function(a,b,c){var d=a("1b");return c.exports=function(a){return Object(d(a))},c.exports}),a.registerDynamic("1c",[],!0,function(a,b,c){var d={}.toString;return c.exports=function(a){return d.call(a).slice(8,-1)},c.exports}),a.registerDynamic("1d",["1c"],!0,function(a,b,c){var d=a("1c");return c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)},c.exports}),a.registerDynamic("10",[],!0,function(a,b,c){return c.exports=function(a){try{return!!a()}catch(b){return!0}},c.exports}),a.registerDynamic("1e",["1a","12","1d","10"],!0,function(a,b,c){var d=a("1a"),e=a("12"),f=a("1d");return c.exports=a("10")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign,c.exports}),a.registerDynamic("1f",["e","1e"],!0,function(a,b,c){var d=a("e");return d(d.S+d.F,"Object",{assign:a("1e")}),c.exports}),a.registerDynamic("f",[],!0,function(a,b,c){var d=c.exports={version:"1.2.6"};return"number"==typeof __e&&(__e=d),c.exports}),a.registerDynamic("20",["1f","f"],!0,function(a,b,c){return a("1f"),c.exports=a("f").Object.assign,c.exports}),a.registerDynamic("8",["20"],!0,function(a,b,c){return c.exports={"default":a("20"),__esModule:!0},c.exports}),a.register("21",["8"],function(a){var b;return{setters:[function(a){b=a["default"]}],execute:function(){"use strict";a("default",{setup:function(a){function c(){set_canvas_position(o)}void 0===a&&(a={}),void 0===a.frameDurationFactor&&(a.frameDurationFactor=1),void 0===a.inputEvent&&(a.inputEvent=inputEvent);var d=a.duration||17,e=document.ratio,f=a.width||480,g=a.height||640,h=Math.floor(f*e),i=Math.floor(g*e),j=a.paddingFactor||1,k=Math.floor(f*j*e),l=Math.floor(g*j*e),m=imageHelper.create(f,g),n=imageHelper.create(k,l),o=imageHelper.create(h,i),p=n.context(),q=m.context(),r=o.context();place_viz(o),c();var s;a.backgroundImageUrl;void 0!==a.loadingImageUrl&&(s=imageHelper.adjust_ratio(imageHelper.to_canvas(a.loadingImageUrl)));var t,u=a.frameDurationFactor*d,v=750,w=3*a.frameDurationFactor;t=void 0===a.opacity?1:a.opacity;var x={config:a,width:f,height:g,dur:d,frameDuration:u,fadeDuration:a.fadeDuration||v,image:s,canvas:m,context:q,fullCanvas:n,fullContext:p,screenCanvas:o,screenContext:r,xShift:Math.floor(.5*(j-1)*f),yShift:Math.floor(.5*(j-1)*g),resizeSkip:w,lastCollision:0,lastResize:0,viewportX:0,viewportY:0,viewportWidth:o.width,viewportHeight:o.height,detect:actionHelper.detect,perform:actionHelper.perform,image_transition:transitionHelper.step_func("image",u),opacity:t,fade:itemHelper.method.fade,shake:effectHelper.shake,setup_item:itemHelper.setup,setup_ui:uiHelper.setup,setup_score:scoreHelper.setup,clearSwitch:!0,input:a.inputEvent||inputEvent,run:a.run||vizHelper.run,stagingArray:a.item||[],screen_callback:a.screen_callback,keyboard_callback:a.keyboard_callback,transitionSet:{x:$Z.transition.rounded_linear_transition_func("viewportX",3*d),y:$Z.transition.rounded_linear_transition_func("viewportY",3*d)},collision:null,collision_detect:a.collision_detect||collisionDetect.pixelwise,prep:function(){$Z.iter-this.lastResize>this.resizeSkip&&(c(),this.lastResize=$Z.iter),void 0===this.item&&(this.item=[]),this.item=this.item.filter(function(a){return a.removeSwitch!==!0}),void 0!==this.ui&&(this.ui.item=this.ui.item.filter(function(a){return a.removeSwitch!==!0}));for(var a=0;a<this.stagingArray.length;a++)-1===this.item.indexOf(this.stagingArray[a])&&this.item.push(this.stagingArray[a]),void 0!==this.ui&&this.stagingArray[a].uiSwitch===!0&&-1===this.ui.item.indexOf(this.stagingArray[a])&&this.ui.item.push(this.stagingArray[a]);this.stagingArray=[],$Z.item(this.item),this.clearSwitch===!0&&this.fullContext.clearRect(0,0,this.fullCanvas.width,this.fullCanvas.height);var b=!1;return b&&(this.fullContext.globalAlpha=.75),void 0!==this.image&&this.fullContext.drawImage(this.image,0,0),!0},post:function(){var a=Math.floor((this.viewportX+this.xShift)*e),b=Math.floor((this.viewportY+this.yShift)*e),c=this.viewportWidth,d=this.viewportHeight,f=0,g=0,h=o.width,i=o.height;this.screenContext.clearRect(0,0,this.screenCanvas.width,this.screenCanvas.height),this.screenContext.globalAlpha=this.opacity,this.screenContext.drawImage(this.fullCanvas,a,b,c,d,f,g,h,i)},zoom_inout:effectHelper.zoom_inout,panX:function(a,b){var c=transitionHelper.sequence(b.map(function(b){return $Z.transition.rounded_linear_transition_func("viewportX",a)(b)}));this.add_transition(c[0])},panY:function(a,b){var c=transitionHelper.sequence(b.map(function(b){return $Z.transition.rounded_linear_transition_func("viewportY",a)(b)}));this.add_transition(c[0])},fader:function(a,b,c){return void 0===c&&(c=this),void 0===b&&(b=c.fadeDuration),a.constructor!==Array&&(a=[a]),imageEffectHelper.fade_sequence({duration:b,value:a})[0]}};if(void 0!==a.item)for(var y=0;y<a.item.length;y++)a.item[y].viz=x;return b(x,transitionHelper.method),b(x,itemHelper.method),x.zoom=effectHelper.zoom,x},run:function(a){void 0===a&&this!==vizHelper&&(a=this),document.viz=a,document.addEventListener("mousedown",a.input.down,!1),document.addEventListener("mouseup",a.input.up,!1),document.addEventListener("touchstart",function(b){b.preventDefault(),a.input.down.call(this,b)},!1),document.addEventListener("touchend",a.input.up,!1),document.addEventListener("keydown",a.input.down,!1),document.addEventListener("keyup",a.input.up,!1),$Z.viz(a),$Z.run()},clear_cover:function(a){var b=imageHelper.create(a.width,a.height);imageEffectHelper.opacity(b,1);var c={image:b,uiSwitch:!0,addSwitch:!0};return a.setup_item(c)}})}}}),a.register("1",["2","3","4","6","7","9","14","15","16","21","a","b","c"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a["default"]},function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a["default"]},function(a){k=a["default"]},function(a){l=a["default"]},function(a){m=a["default"]},function(a){n=a["default"]}],execute:function(){o={action:b,audio:c,collision:d,draw:e,effect:f,image:g,input:l,item:m,loader:n,sprite:h,transition:i,ui:j,viz:k},void 0!==window.$Z&&(window.$Z.core=o),a("default",o)}}})})(function(a){a()});
//# sourceMappingURL=vizflow-core.js.map